"use strict";(self.webpackChunkreact_3d=self.webpackChunkreact_3d||[]).push([[357],{2677:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(5043),o=a(9435),d=a(9408),s=a(7583),i=a(4322),c=a(1750);const r=a.p+"static/media/hit.3c1bbb362b35834da2ed.mp3",h=a.p+"static/media/nx.ffc3dd058122007470fe.png",w=a.p+"static/media/ny.096154b3602da9c77d58.png",p=a.p+"static/media/nz.46e24e8cd48ff206d3c9.png",m=a.p+"static/media/px.d4a1ee1ab163f99b38cf.png",l=a.p+"static/media/py.2cee8d8610e37b82b65c.png",u=a.p+"static/media/pz.9c5924db97fcc7ff7355.png";var y=a(579);class g extends n.Component{constructor(){super(...arguments),this.initThree=()=>{const e=new i.Ay,t={createSphere:()=>{_(.5*Math.random(),{x:3*(Math.random()-.5),y:3,z:3*(Math.random()-.5)})},createBox:()=>{R(Math.random(),Math.random(),Math.random(),{x:3*(Math.random()-.5),y:3,z:3*(Math.random()-.5)})}};e.reset=()=>{for(const e of q)e.body.removeEventListener("collide",g),M.removeBody(e.body),n.remove(e.mesh);q.splice(0,q.length)},e.add(t,"createSphere"),e.add(t,"createBox"),e.add(t,"reset");const a=document.querySelector("canvas.webgl"),n=new o.Z58,y=new Audio(r),g=e=>{e.contact.getImpactVelocityAlongNormal()>1.5&&(y.volume=Math.random(),y.currentTime=0,y.play())},b=(new o.ScU).load([m,h,l,w,u,p]),M=new c.HK;M.gravity.set(0,-9.82,0),M.broadphase=new c.EX(M),M.allowSleep=!0;const f=new c.im("default"),v=new c.QE(f,f,{friction:.1,restitution:.7});M.addContactMaterial(v),M.defaultContactMaterial=v;const x=new c.Zc,S=new c.nB;S.mass=0,S.addShape(x),S.quaternion.setFromAxisAngle(new c.eB(-1,0,0),.5*Math.PI),M.addBody(S);const B=new o.eaF(new o.bdM(10,10),new o._4j({color:"#777777",metalness:.3,roughness:.4,envMap:b}));B.receiveShadow=!0,B.rotation.x=.5*-Math.PI,n.add(B);const z=new o.$p8(16777215,.7);n.add(z);const P=new o.ZyN(16777215,.2);P.castShadow=!0,P.shadow.mapSize.set(1024,1024),P.shadow.camera.far=15,P.shadow.camera.left=-7,P.shadow.camera.top=7,P.shadow.camera.right=7,P.shadow.camera.bottom=-7;const E={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",(()=>{E.width=window.innerWidth,E.height=window.innerHeight,j.aspect=E.width/E.height,j.updateProjectionMatrix(),F.render(n,j),F.setPixelRatio(Math.min(window.devicePixelRatio,2))}));const j=new o.ubm(35,E.width/E.height,.1,100);j.position.set(-3,3,3);const A=new s.N(j,a);A.enableDamping=!0;const F=new d.JeP({canvas:a});F.shadowMap.enabled=!0,F.shadowMap.type=o.QP0,F.setSize(E.width,E.height),F.setPixelRatio(Math.min(window.devicePixelRatio,2));const q=[],C=new o.Gu$(1,20,20),N=new o._4j({metalness:.3,roughness:.4,envMap:b}),_=(e,t)=>{const a=new o.eaF(C,N);a.castShadow=!0,a.scale.set(e,e,e),a.position.copy(t),n.add(a);const d=new c.iy(e),s=new c.nB({mass:1,shape:d,material:b});s.position.copy(t),s.addEventListener("collide",g),M.addBody(s),q.push({mesh:a,body:s})};_(.5,{x:0,y:3,z:0});const k=new o.iNn(1,1,1),L=new o._4j({metalness:.3,roughness:.4,envMap:b}),R=(e,t,a,d)=>{const s=new o.eaF(k,L);s.castShadow=!0,s.scale.set(e,t,a),s.position.copy(d),n.add(s);const i=new c.az(new c.eB(.5*e,.5*t,.5*a)),r=new c.nB({mass:1,shape:i,material:b});r.position.copy(d),r.addEventListener("collide",g),M.addBody(r),q.push({mesh:s,body:r})},T=new o.zD7;let D=0;const H=()=>{const e=T.getElapsedTime(),t=e-D;D=e,M.step(1/60,t,3);for(const a of q)a.mesh.position.copy(a.body.position),a.mesh.quaternion.copy(a.body.quaternion);A.update(),F.render(n,j),window.requestAnimationFrame(H)};H()}}componentDidMount(){this.initThree()}render(){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("canvas",{className:"webgl"})})}}}}]);
//# sourceMappingURL=357.d3821e13.chunk.js.map